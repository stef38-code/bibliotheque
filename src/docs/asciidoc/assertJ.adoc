= Test Avec AssertJ
include::default-preferences.adoc[]


==  Test Exception
=== Déconseillé
Voici quelques exemples de test pour gérer les exceptions

[source,java]
----
import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.Test;

import static org.assertj.core.api.Assertions.assertThatThrownBy;
import static org.assertj.core.api.AssertionsForClassTypes.assertThat;
import static org.assertj.core.api.AssertionsForClassTypes.catchThrowable;

class UrlHttpTest {

    @Test
    void get_Quand_UrlEstVide_Alors_UrlHttpErreur() {
        assertThatThrownBy(() -> UrlHttpBuilder.get()
                .url("")
                .build())
                .isInstanceOf(UrlHttpErreur.class)
                .hasMessage("The value(url) must not be null or blank");

    }
}
----

=== Conseillé

[source,java]
----
import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.Test;

import static org.assertj.core.api.AssertionsForClassTypes.assertThat;
import static org.assertj.core.api.AssertionsForClassTypes.catchThrowable;

class UrlHttpTest {

    @Test
    void get_Quand_UrlEstVide_Alors_UrlHttpErreur() {
        Throwable thrown = catchThrowable(() -> UrlHttpBuilder.get()
                .url("")
                .build());
        Assertions.assertThat(thrown)
                .isInstanceOf(UrlHttpErreur.class)
                .hasMessage("The value(url) must not be null or blank");

    }
}
----
=== Code Custom Postfix Templates
[code,text]
----
.testThrowException : assertj assertThrowException
    ANY                 [org.assertj.core.api.Assertions]     →  java.lang.Throwable thrown = org.assertj.core.api.AssertionsForClassTypes.catchThrowable(() -> $expr$); \
                                                                org.assertj.core.api.Assertions.assertThat(thrown) \
                                                                .isInstanceOf($except$) \
                                                                .hasMessage($msg$); \
                                                                $END$                                                       [USE_STATIC_IMPORTS]
----
